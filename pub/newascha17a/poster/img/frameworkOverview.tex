\scalebox{0.85}{
\begin{tikzpicture}[every text node part/.style={align=center},>=stealth,scale=2.7]
%\linespread{0.6}
\tikzstyle{block} = [rounded corners=10,draw=black,fill]
\tikzstyle{arrow} = [->,line width=0.12cm,black]
\node [block, fill=black!30!yellow!05, rotate=0,font=\small ] (v1) at (1.5,3.8) {Synthesis Problem Instance};

\node[block,fit={(-3.4,3.1) (6.3,-3.25)},fill=blue!05] (syn) {};
%\draw[block,fill=blue!05] (-3.4, 3.25) rectangle (6.4,-3.4) ;

\node[inner sep=0.0cm,anchor=west,rotate=90] at (6.2,-3.2) {\textbf {ASP Solver (Clingo)}};
%\node[anchor=north west,inner sep=0.1cm] at (syn.north west) {\textbf {Answer Set Solver (Clingo)}};
\node [block, text width=5.5cm, fill=myblue, font=\footnotesize\color{white} ] (v7) at (-2,-0.9) {Decide binding or routing variable};
\draw [block, fill=blue!40](5.9,2.8) -- (5.9,-3.3) -- (-0.7,-3.3) -- (-0.7,0.0) -- (-3.1,0.0) -- (-3.1,2.8) -- (0.5,2.8) -- (0.6,2.8) -- cycle;
\node[anchor=west,inner sep=0.0cm,rotate=90] at (5.7,-3.2) {\textbf{\small {Background Theory}}};

\draw[block,fill=black!40!green!40]  (5,2.7) rectangle (-1.8,0.6);
\draw[block,fill=black!40!green!40]  (5,0.4) rectangle (2,-1.4);
\node[anchor=west,inner sep=0.0cm,align=left] at (3.8,0.8) {\footnotesize {\textbf{QF--IDL}}};
\node[anchor=west,inner sep=0.0cm,align=left] at (3.8,-1.2) {\footnotesize {\textbf{Periodic}}};
\node [draw, diamond, aspect=2,minimum width=8.1cm,minimum height=4.05cm, fill=myblue] (v2) at (0.0,1.7) {} ;


\node [block, text width=5cm, fill=myblue,text=white,font=\footnotesize] (v8) at (3.5,1.7) {(Partial) Schedule};

\node [block,  fill=black!30!yellow!05,rotate=0,font=\small] (v4) at (3.5,-4) {Feasible Implementation};
\node [block, text width=4.5cm,  fill=black!60!red!60,font=\footnotesize\color{white}] (v5) at (0.6,-0.9) {Restrict search space};
\draw [arrow] (v5) -- (v7);
\draw [arrow] (v1) edge (syn);
\draw [arrow](v7) -- node[near start, above right,rotate=90,font=\footnotesize]{partial\\ assignment}(-2,1.7) -- (v2);
%\draw [arrow](v7) -- node[midway, below,rotate=90]{\footnotesize assignment}node[midway, above,rotate=90]{\footnotesize partial}(-2,1.7) -- (v2);

\draw [arrow] (v2.center) edge node[near end, auto]{\footnotesize no}(v8);
\draw [arrow](v2.center) -- node[near end, right]{\footnotesize yes}(-0.0,0.5) -- (0.6,0.5) -- (v5);
\node [draw, diamond, aspect=2,minimum width=8.1cm,minimum height=4.05cm, fill=myblue] (v2a) at (v2.center) {} ;
\node[anchor=center,inner sep=0.2cm, text width=6.21cm,text=white,font=\footnotesize] at (v2.center) {Negative\\ cycle?};

\node [draw, diamond, aspect=2,minimum width=8.1cm,minimum height=4.05cm,text=white, fill=myblue] (v9) at (3.5,-2.5) {} ;
\node [draw, diamond, aspect=2,minimum width=8.1cm,minimum height=4.05cm,text=white, fill=myblue] (v19) at (3.5,-0.4) {} ;
\draw [arrow] (v8) edge (v19);
\draw [arrow](v19.center) -- (5.4,-0.4) node[very near end,below]{\footnotesize {\ yes}} -- (5.4,2.7)  -- (-0.0,2.7) -- (v2);
\draw [arrow] (v19.center) -- (3.5,-1.5) node[at end,left]{\footnotesize no}  -- (v9);
\node [anchor=center,draw, diamond, aspect=2,minimum width=8.1cm,minimum height=4.05cm,text=white, fill=myblue] (v19a) at (v19.center) {} ;
\node[anchor=center,inner sep=0.2cm, text width=6.21cm,text=white,font=\footnotesize] at (v19.center) {Periodic\\ overlapping?};
\draw [arrow] (v9.center) -- node[very near end,right]{\footnotesize yes}  (v4);
\draw [arrow](v9.center) -- (1.1,-2.5) -- (-2,-2.5) node[midway,above]{\footnotesize no}-- (-2,-2.1) -- (v7);
\node [draw, diamond, aspect=2,minimum width=8.1cm,minimum height=4.05cm,text=white, fill=myblue] (v9a) at (v9.center) {} ;
\node[anchor=center,inner sep=0.2cm, text width=6.21cm,text=white,font=\footnotesize] at (v9.center) {Complete\\ assignement?};



\end{tikzpicture}}